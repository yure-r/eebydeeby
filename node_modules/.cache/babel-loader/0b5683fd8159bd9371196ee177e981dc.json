{"ast":null,"code":"import _toConsumableArray from \"/Users/richardyurewitch/Downloads/emojibuilder-master 3/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _classCallCheck from \"/Users/richardyurewitch/Downloads/emojibuilder-master 3/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/richardyurewitch/Downloads/emojibuilder-master 3/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"/Users/richardyurewitch/Downloads/emojibuilder-master 3/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/Users/richardyurewitch/Downloads/emojibuilder-master 3/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/richardyurewitch/Downloads/emojibuilder-master 3/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nvar _jsxFileName = \"/Users/richardyurewitch/Downloads/emojibuilder-master 3/src/Layers.js\";\nimport React, { Component } from 'react';\nimport './List.css';\nimport './Layers.css';\nimport Button from './Button.js';\nimport LayerAdjustment from './LayerAdjustment.js';\nvar App;\nvar mainRowClassName = 'primary';\n\nvar Layers = /*#__PURE__*/function (_Component) {\n  _inherits(Layers, _Component);\n\n  var _super = _createSuper(Layers);\n\n  function Layers(props) {\n    var _this;\n\n    _classCallCheck(this, Layers);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      isDragging: false,\n      dragTarget: null,\n      dragIndex: null\n    };\n\n    _this.makeItem = function (layer, i) {\n      var className = \"\\n      \".concat(layer.flipped ? 'flipped' : '', \"\\n      \").concat(layer === _this.state.dragLayer ? 'dragged' : '', \"\\n    \");\n      return /*#__PURE__*/React.createElement(\"li\", {\n        key: i,\n        \"data-index\": i,\n        className: className,\n        draggable: true,\n        onDragStart: function onDragStart(e) {\n          return _this.onDragStart(e, layer);\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: mainRowClassName,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 9\n        }\n      }, layer.asset.imgEl, /*#__PURE__*/React.createElement(\"span\", {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }\n      }, layer.asset.prettyName), /*#__PURE__*/React.createElement(Button, {\n        icon: \"position\",\n        label: \"Adjust position\",\n        onClick: function onClick() {\n          return App.toggleLayerTransforms(layer);\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(Button, {\n        icon: \"flip\",\n        label: \"Flip\",\n        onClick: function onClick() {\n          return App.flipLayer(layer);\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(Button, {\n        icon: \"delete\",\n        label: \"Delete\",\n        onClick: function onClick() {\n          return App.removeLayer(layer);\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }\n      })), layer.showTransforms ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \"adjustments\",\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(LayerAdjustment, {\n        app: App,\n        layer: layer,\n        label: \"X\",\n        prop: \"translateX\",\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(LayerAdjustment, {\n        app: App,\n        layer: layer,\n        label: \"Y\",\n        prop: \"translateY\",\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(LayerAdjustment, {\n        app: App,\n        layer: layer,\n        label: \"Scale\",\n        prop: \"scale\",\n        step: 0.01,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(LayerAdjustment, {\n        app: App,\n        layer: layer,\n        label: \"Rotation\",\n        prop: \"rotate\",\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 13\n        }\n      })) : '');\n    };\n\n    _this.onDragStart = function (e, dragLayer) {\n      _this.setState({\n        isDragging: true,\n        dragTarget: e.target,\n        dragLayer: dragLayer\n      });\n    };\n\n    _this.onDragOver = function (e) {\n      if (_this.state.isDragging && e.target && e.target !== _this.state.dragTarget && e.target.className === mainRowClassName) {\n        var target = e.target.parentNode;\n        var targetIndex = parseInt(target.getAttribute('data-index'));\n        var targetRect = target.getBoundingClientRect();\n        var targetCenter = targetRect.top + targetRect.height / 2;\n\n        var layers = _toConsumableArray(App.state.layers);\n\n        var dragIndex = layers.indexOf(_this.state.dragLayer); // Insert before target\n\n        if (e.clientY < targetCenter) {\n          layers.splice(targetIndex, 0, layers.splice(dragIndex, 1)[0]);\n        } // Insert after target\n        else {\n          layers.splice(targetIndex + 1, 0, layers.splice(dragIndex, 1)[0]);\n        }\n\n        App.setState({\n          layers: layers\n        });\n      }\n    };\n\n    _this.onDragEnd = function (e) {\n      _this.setState({\n        isDragging: false,\n        dragTarget: null,\n        dragLayer: null\n      });\n    };\n\n    App = _this.props.app;\n    return _this;\n  }\n\n  _createClass(Layers, [{\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"List Layers\",\n        onDragOver: this.onDragOver,\n        onDragEnd: this.onDragEnd,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 26,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"ul\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 9\n        }\n      }, App.state.layers.map(this.makeItem)));\n    }\n  }]);\n\n  return Layers;\n}(Component);\n\nexport default Layers;","map":{"version":3,"names":["React","Component","Button","LayerAdjustment","App","mainRowClassName","Layers","props","state","isDragging","dragTarget","dragIndex","makeItem","layer","i","className","flipped","dragLayer","e","onDragStart","asset","imgEl","prettyName","toggleLayerTransforms","flipLayer","removeLayer","showTransforms","setState","target","onDragOver","parentNode","targetIndex","parseInt","getAttribute","targetRect","getBoundingClientRect","targetCenter","top","height","layers","indexOf","clientY","splice","onDragEnd","app","map"],"sources":["/Users/richardyurewitch/Downloads/emojibuilder-master 3/src/Layers.js"],"sourcesContent":["import React, { Component } from 'react';\nimport './List.css';\nimport './Layers.css';\n\nimport Button from './Button.js';\nimport LayerAdjustment from './LayerAdjustment.js';\n\nlet App;\n\nconst mainRowClassName = 'primary';\n\nclass Layers extends Component {\n  state = {\n    isDragging: false,\n    dragTarget: null,\n    dragIndex: null,\n  };\n\n  constructor(props) {\n    super(props);\n    App = this.props.app;\n  }\n\n  render() {\n    return (\n      <div \n        className='List Layers'\n        onDragOver={this.onDragOver}\n        onDragEnd={this.onDragEnd}\n      >\n        <ul>\n          {App.state.layers.map(this.makeItem)}\n        </ul>\n      </div>\n    );\n  }\n  \n  makeItem = (layer, i) => {\n    const className = `\n      ${ layer.flipped ? 'flipped' : '' }\n      ${ layer === this.state.dragLayer ? 'dragged' : '' }\n    `;\n\n    return (\n      <li \n        key={i}\n        data-index={i}\n        className={className}\n        draggable={true}\n        onDragStart={(e) => this.onDragStart(e, layer)}\n      >\n        <div className={mainRowClassName}>\n          {layer.asset.imgEl}\n          <span>{layer.asset.prettyName}</span>\n          <Button\n            icon='position'\n            label='Adjust position'\n            onClick={() => App.toggleLayerTransforms(layer)}\n          />\n          <Button\n            icon='flip'\n            label='Flip'\n            onClick={() => App.flipLayer(layer)}\n          />\n          <Button\n            icon='delete'\n            label='Delete'\n            onClick={() => App.removeLayer(layer)}\n          />\n        </div>\n        { layer.showTransforms ?\n          <div className='adjustments'>\n            <LayerAdjustment app={App} layer={layer}\n              label='X' prop='translateX' />\n            <LayerAdjustment app={App} layer={layer}\n              label='Y' prop='translateY' />\n            <LayerAdjustment app={App} layer={layer}\n              label='Scale' prop='scale' step={0.01} />\n            <LayerAdjustment app={App} layer={layer}\n              label='Rotation' prop='rotate' />\n          </div>\n        : '' }\n      </li>\n    );\n  }\n\n  onDragStart = (e, dragLayer) => {\n    this.setState({\n      isDragging: true,\n      dragTarget: e.target,\n      dragLayer,\n    });\n  }\n\n  onDragOver = (e) => {\n    if (\n      this.state.isDragging \n      && e.target\n      && e.target !== this.state.dragTarget\n      && e.target.className === mainRowClassName\n    ) {\n      const target = e.target.parentNode;\n      const targetIndex = parseInt(target.getAttribute('data-index'));\n      const targetRect = target.getBoundingClientRect();\n      const targetCenter = targetRect.top + targetRect.height / 2;\n\n      let layers = [...App.state.layers];\n      const dragIndex = layers.indexOf(this.state.dragLayer);\n\n      // Insert before target\n      if (e.clientY < targetCenter) {\n        layers.splice(targetIndex, 0, layers.splice(dragIndex, 1)[0]);\n      }\n      // Insert after target\n      else {\n        layers.splice(targetIndex + 1, 0, layers.splice(dragIndex, 1)[0]);\n      }\n\n      App.setState({ layers });\n    }\n  }\n\n  onDragEnd = (e) => {\n    this.setState({\n      isDragging: false,\n      dragTarget: null,\n      dragLayer: null,\n    });\n  }\n}\n\nexport default Layers;"],"mappings":"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"},"metadata":{},"sourceType":"module"}