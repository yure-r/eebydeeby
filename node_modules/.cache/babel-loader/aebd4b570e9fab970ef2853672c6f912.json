{"ast":null,"code":"import _toConsumableArray from\"/Users/richardyurewitch/Downloads/emojibuilder-master 3/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _classCallCheck from\"/Users/richardyurewitch/Downloads/emojibuilder-master 3/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/richardyurewitch/Downloads/emojibuilder-master 3/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/richardyurewitch/Downloads/emojibuilder-master 3/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/richardyurewitch/Downloads/emojibuilder-master 3/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import'./List.css';import'./Layers.css';import Button from'./Button.js';import LayerAdjustment from'./LayerAdjustment.js';var App;var mainRowClassName='primary';var Layers=/*#__PURE__*/function(_Component){_inherits(Layers,_Component);var _super=_createSuper(Layers);function Layers(props){var _this;_classCallCheck(this,Layers);_this=_super.call(this,props);_this.state={isDragging:false,dragTarget:null,dragIndex:null};_this.makeItem=function(layer,i){var className=\"\\n      \".concat(layer.flipped?'flipped':'',\"\\n      \").concat(layer===_this.state.dragLayer?'dragged':'',\"\\n    \");return/*#__PURE__*/React.createElement(\"li\",{key:i,\"data-index\":i,className:className,draggable:true,onDragStart:function onDragStart(e){return _this.onDragStart(e,layer);}},/*#__PURE__*/React.createElement(\"div\",{className:mainRowClassName},layer.asset.imgEl,/*#__PURE__*/React.createElement(\"span\",null,layer.asset.prettyName),/*#__PURE__*/React.createElement(Button,{icon:\"position\",label:\"Adjust position\",onClick:function onClick(){return App.toggleLayerTransforms(layer);}}),/*#__PURE__*/React.createElement(Button,{icon:\"flip\",label:\"Flip\",onClick:function onClick(){return App.flipLayer(layer);}}),/*#__PURE__*/React.createElement(Button,{icon:\"delete\",label:\"Delete\",onClick:function onClick(){return App.removeLayer(layer);}})),layer.showTransforms?/*#__PURE__*/React.createElement(\"div\",{className:\"adjustments\"},/*#__PURE__*/React.createElement(LayerAdjustment,{app:App,layer:layer,label:\"X\",prop:\"translateX\"}),/*#__PURE__*/React.createElement(LayerAdjustment,{app:App,layer:layer,label:\"Y\",prop:\"translateY\"}),/*#__PURE__*/React.createElement(LayerAdjustment,{app:App,layer:layer,label:\"Scale\",prop:\"scale\",step:0.01}),/*#__PURE__*/React.createElement(LayerAdjustment,{app:App,layer:layer,label:\"Rotation\",prop:\"rotate\"})):'');};_this.onDragStart=function(e,dragLayer){_this.setState({isDragging:true,dragTarget:e.target,dragLayer:dragLayer});};_this.onDragOver=function(e){if(_this.state.isDragging&&e.target&&e.target!==_this.state.dragTarget&&e.target.className===mainRowClassName){var target=e.target.parentNode;var targetIndex=parseInt(target.getAttribute('data-index'));var targetRect=target.getBoundingClientRect();var targetCenter=targetRect.top+targetRect.height/2;var layers=_toConsumableArray(App.state.layers);var dragIndex=layers.indexOf(_this.state.dragLayer);// Insert before target\nif(e.clientY<targetCenter){layers.splice(targetIndex,0,layers.splice(dragIndex,1)[0]);}// Insert after target\nelse{layers.splice(targetIndex+1,0,layers.splice(dragIndex,1)[0]);}App.setState({layers:layers});}};_this.onDragEnd=function(e){_this.setState({isDragging:false,dragTarget:null,dragLayer:null});};App=_this.props.app;return _this;}_createClass(Layers,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"List Layers\",onDragOver:this.onDragOver,onDragEnd:this.onDragEnd},/*#__PURE__*/React.createElement(\"ul\",null,App.state.layers.map(this.makeItem)));}}]);return Layers;}(Component);export default Layers;","map":{"version":3,"names":["React","Component","Button","LayerAdjustment","App","mainRowClassName","Layers","props","state","isDragging","dragTarget","dragIndex","makeItem","layer","i","className","flipped","dragLayer","e","onDragStart","asset","imgEl","prettyName","toggleLayerTransforms","flipLayer","removeLayer","showTransforms","setState","target","onDragOver","parentNode","targetIndex","parseInt","getAttribute","targetRect","getBoundingClientRect","targetCenter","top","height","layers","indexOf","clientY","splice","onDragEnd","app","map"],"sources":["/Users/richardyurewitch/Downloads/emojibuilder-master 3/src/Layers.js"],"sourcesContent":["import React, { Component } from 'react';\nimport './List.css';\nimport './Layers.css';\n\nimport Button from './Button.js';\nimport LayerAdjustment from './LayerAdjustment.js';\n\nlet App;\n\nconst mainRowClassName = 'primary';\n\nclass Layers extends Component {\n  state = {\n    isDragging: false,\n    dragTarget: null,\n    dragIndex: null,\n  };\n\n  constructor(props) {\n    super(props);\n    App = this.props.app;\n  }\n\n  render() {\n    return (\n      <div \n        className='List Layers'\n        onDragOver={this.onDragOver}\n        onDragEnd={this.onDragEnd}\n      >\n        <ul>\n          {App.state.layers.map(this.makeItem)}\n        </ul>\n      </div>\n    );\n  }\n  \n  makeItem = (layer, i) => {\n    const className = `\n      ${ layer.flipped ? 'flipped' : '' }\n      ${ layer === this.state.dragLayer ? 'dragged' : '' }\n    `;\n\n    return (\n      <li \n        key={i}\n        data-index={i}\n        className={className}\n        draggable={true}\n        onDragStart={(e) => this.onDragStart(e, layer)}\n      >\n        <div className={mainRowClassName}>\n          {layer.asset.imgEl}\n          <span>{layer.asset.prettyName}</span>\n          <Button\n            icon='position'\n            label='Adjust position'\n            onClick={() => App.toggleLayerTransforms(layer)}\n          />\n          <Button\n            icon='flip'\n            label='Flip'\n            onClick={() => App.flipLayer(layer)}\n          />\n          <Button\n            icon='delete'\n            label='Delete'\n            onClick={() => App.removeLayer(layer)}\n          />\n        </div>\n        { layer.showTransforms ?\n          <div className='adjustments'>\n            <LayerAdjustment app={App} layer={layer}\n              label='X' prop='translateX' />\n            <LayerAdjustment app={App} layer={layer}\n              label='Y' prop='translateY' />\n            <LayerAdjustment app={App} layer={layer}\n              label='Scale' prop='scale' step={0.01} />\n            <LayerAdjustment app={App} layer={layer}\n              label='Rotation' prop='rotate' />\n          </div>\n        : '' }\n      </li>\n    );\n  }\n\n  onDragStart = (e, dragLayer) => {\n    this.setState({\n      isDragging: true,\n      dragTarget: e.target,\n      dragLayer,\n    });\n  }\n\n  onDragOver = (e) => {\n    if (\n      this.state.isDragging \n      && e.target\n      && e.target !== this.state.dragTarget\n      && e.target.className === mainRowClassName\n    ) {\n      const target = e.target.parentNode;\n      const targetIndex = parseInt(target.getAttribute('data-index'));\n      const targetRect = target.getBoundingClientRect();\n      const targetCenter = targetRect.top + targetRect.height / 2;\n\n      let layers = [...App.state.layers];\n      const dragIndex = layers.indexOf(this.state.dragLayer);\n\n      // Insert before target\n      if (e.clientY < targetCenter) {\n        layers.splice(targetIndex, 0, layers.splice(dragIndex, 1)[0]);\n      }\n      // Insert after target\n      else {\n        layers.splice(targetIndex + 1, 0, layers.splice(dragIndex, 1)[0]);\n      }\n\n      App.setState({ layers });\n    }\n  }\n\n  onDragEnd = (e) => {\n    this.setState({\n      isDragging: false,\n      dragTarget: null,\n      dragLayer: null,\n    });\n  }\n}\n\nexport default Layers;"],"mappings":"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"},"metadata":{},"sourceType":"module"}