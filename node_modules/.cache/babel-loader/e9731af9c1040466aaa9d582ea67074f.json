{"ast":null,"code":"import _toConsumableArray from \"/Users/richardyurewitch/Downloads/emojibuilder-master 3/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/richardyurewitch/Downloads/emojibuilder-master 3/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/richardyurewitch/Downloads/emojibuilder-master 3/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/richardyurewitch/Downloads/emojibuilder-master 3/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/richardyurewitch/Downloads/emojibuilder-master 3/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/richardyurewitch/Downloads/emojibuilder-master 3/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/richardyurewitch/Downloads/emojibuilder-master 3/src/Layers.js\";\nimport React, { Component } from 'react';\nimport './List.css';\nimport './Layers.css';\nimport Button from './Button.js';\nimport LayerAdjustment from './LayerAdjustment.js';\nvar App;\nvar mainRowClassName = 'primary';\n\nvar Layers =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Layers, _Component);\n\n  function Layers(props) {\n    var _this;\n\n    _classCallCheck(this, Layers);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Layers).call(this, props));\n    _this.state = {\n      isDragging: false,\n      dragTarget: null,\n      dragIndex: null\n    };\n\n    _this.makeItem = function (layer, i) {\n      var className = \"\\n      \".concat(layer.flipped ? 'flipped' : '', \"\\n      \").concat(layer === _this.state.dragLayer ? 'dragged' : '', \"\\n    \");\n      return React.createElement(\"li\", {\n        key: i,\n        \"data-index\": i,\n        className: className,\n        draggable: true,\n        onDragStart: function onDragStart(e) {\n          return _this.onDragStart(e, layer);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: mainRowClassName,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, layer.asset.imgEl, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, layer.asset.prettyName), React.createElement(Button, {\n        icon: \"position\",\n        label: \"Adjust position\",\n        onClick: function onClick() {\n          return App.toggleLayerTransforms(layer);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }), React.createElement(Button, {\n        icon: \"flip\",\n        label: \"Flip\",\n        onClick: function onClick() {\n          return App.flipLayer(layer);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }), React.createElement(Button, {\n        icon: \"delete\",\n        label: \"Delete\",\n        onClick: function onClick() {\n          return App.removeLayer(layer);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      })), layer.showTransforms ? React.createElement(\"div\", {\n        className: \"adjustments\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(LayerAdjustment, {\n        app: App,\n        layer: layer,\n        label: \"X\",\n        prop: \"translateX\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }), React.createElement(LayerAdjustment, {\n        app: App,\n        layer: layer,\n        label: \"Y\",\n        prop: \"translateY\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }), React.createElement(LayerAdjustment, {\n        app: App,\n        layer: layer,\n        label: \"Scale\",\n        prop: \"scale\",\n        step: 0.01,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }), React.createElement(LayerAdjustment, {\n        app: App,\n        layer: layer,\n        label: \"Rotation\",\n        prop: \"rotate\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      })) : '');\n    };\n\n    _this.onDragStart = function (e, dragLayer) {\n      _this.setState({\n        isDragging: true,\n        dragTarget: e.target,\n        dragLayer: dragLayer\n      });\n    };\n\n    _this.onDragOver = function (e) {\n      if (_this.state.isDragging && e.target && e.target !== _this.state.dragTarget && e.target.className === mainRowClassName) {\n        var target = e.target.parentNode;\n        var targetIndex = parseInt(target.getAttribute('data-index'));\n        var targetRect = target.getBoundingClientRect();\n        var targetCenter = targetRect.top + targetRect.height / 2;\n\n        var layers = _toConsumableArray(App.state.layers);\n\n        var dragIndex = layers.indexOf(_this.state.dragLayer); // Insert before target\n\n        if (e.clientY < targetCenter) {\n          layers.splice(targetIndex, 0, layers.splice(dragIndex, 1)[0]);\n        } // Insert after target\n        else {\n            layers.splice(targetIndex + 1, 0, layers.splice(dragIndex, 1)[0]);\n          }\n\n        App.setState({\n          layers: layers\n        });\n      }\n    };\n\n    _this.onDragEnd = function (e) {\n      _this.setState({\n        isDragging: false,\n        dragTarget: null,\n        dragLayer: null\n      });\n    };\n\n    App = _this.props.app;\n    return _this;\n  }\n\n  _createClass(Layers, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"List Layers\",\n        onDragOver: this.onDragOver,\n        onDragEnd: this.onDragEnd,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 26\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 31\n        },\n        __self: this\n      }, App.state.layers.map(this.makeItem)));\n    }\n  }]);\n\n  return Layers;\n}(Component);\n\nexport default Layers;","map":{"version":3,"sources":["/Users/richardyurewitch/Downloads/emojibuilder-master 3/src/Layers.js"],"names":["React","Component","Button","LayerAdjustment","App","mainRowClassName","Layers","props","state","isDragging","dragTarget","dragIndex","makeItem","layer","i","className","flipped","dragLayer","e","onDragStart","asset","imgEl","prettyName","toggleLayerTransforms","flipLayer","removeLayer","showTransforms","setState","target","onDragOver","parentNode","targetIndex","parseInt","getAttribute","targetRect","getBoundingClientRect","targetCenter","top","height","layers","indexOf","clientY","splice","onDragEnd","app","map"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './List.css';\nimport './Layers.css';\n\nimport Button from './Button.js';\nimport LayerAdjustment from './LayerAdjustment.js';\n\nlet App;\n\nconst mainRowClassName = 'primary';\n\nclass Layers extends Component {\n  state = {\n    isDragging: false,\n    dragTarget: null,\n    dragIndex: null,\n  };\n\n  constructor(props) {\n    super(props);\n    App = this.props.app;\n  }\n\n  render() {\n    return (\n      <div \n        className='List Layers'\n        onDragOver={this.onDragOver}\n        onDragEnd={this.onDragEnd}\n      >\n        <ul>\n          {App.state.layers.map(this.makeItem)}\n        </ul>\n      </div>\n    );\n  }\n  \n  makeItem = (layer, i) => {\n    const className = `\n      ${ layer.flipped ? 'flipped' : '' }\n      ${ layer === this.state.dragLayer ? 'dragged' : '' }\n    `;\n\n    return (\n      <li \n        key={i}\n        data-index={i}\n        className={className}\n        draggable={true}\n        onDragStart={(e) => this.onDragStart(e, layer)}\n      >\n        <div className={mainRowClassName}>\n          {layer.asset.imgEl}\n          <span>{layer.asset.prettyName}</span>\n          <Button\n            icon='position'\n            label='Adjust position'\n            onClick={() => App.toggleLayerTransforms(layer)}\n          />\n          <Button\n            icon='flip'\n            label='Flip'\n            onClick={() => App.flipLayer(layer)}\n          />\n          <Button\n            icon='delete'\n            label='Delete'\n            onClick={() => App.removeLayer(layer)}\n          />\n        </div>\n        { layer.showTransforms ?\n          <div className='adjustments'>\n            <LayerAdjustment app={App} layer={layer}\n              label='X' prop='translateX' />\n            <LayerAdjustment app={App} layer={layer}\n              label='Y' prop='translateY' />\n            <LayerAdjustment app={App} layer={layer}\n              label='Scale' prop='scale' step={0.01} />\n            <LayerAdjustment app={App} layer={layer}\n              label='Rotation' prop='rotate' />\n          </div>\n        : '' }\n      </li>\n    );\n  }\n\n  onDragStart = (e, dragLayer) => {\n    this.setState({\n      isDragging: true,\n      dragTarget: e.target,\n      dragLayer,\n    });\n  }\n\n  onDragOver = (e) => {\n    if (\n      this.state.isDragging \n      && e.target\n      && e.target !== this.state.dragTarget\n      && e.target.className === mainRowClassName\n    ) {\n      const target = e.target.parentNode;\n      const targetIndex = parseInt(target.getAttribute('data-index'));\n      const targetRect = target.getBoundingClientRect();\n      const targetCenter = targetRect.top + targetRect.height / 2;\n\n      let layers = [...App.state.layers];\n      const dragIndex = layers.indexOf(this.state.dragLayer);\n\n      // Insert before target\n      if (e.clientY < targetCenter) {\n        layers.splice(targetIndex, 0, layers.splice(dragIndex, 1)[0]);\n      }\n      // Insert after target\n      else {\n        layers.splice(targetIndex + 1, 0, layers.splice(dragIndex, 1)[0]);\n      }\n\n      App.setState({ layers });\n    }\n  }\n\n  onDragEnd = (e) => {\n    this.setState({\n      isDragging: false,\n      dragTarget: null,\n      dragLayer: null,\n    });\n  }\n}\n\nexport default Layers;"]},"metadata":{},"sourceType":"module"}